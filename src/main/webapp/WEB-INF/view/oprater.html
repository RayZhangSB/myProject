
<html>
<head>
    <meta charset="utf-8">
    <style type="text/css">
        #player {
            margin: 10px;
        }

        .btn_e {
            text-align: center;
            width: 115px;
            height: 55px;
            background: #0099FF;
            color: #f2f2f2;
            margin-left: 10px;
            padding: 10px;
            font-size: 20px;
            font-family: 宋体, Arial;
            font-weight: bold;
            border-radius: 28px;
            border-width: 5px;

        }

    </style>


    <script src="/cctv/js/video-js-5.19.2/jquery-2.2.3.min.js"></script>
    <link rel="stylesheet" href="/cctv/js/video-js-5.19.2/video-js.css"/>
    <script src="/cctv/js/video-js-5.19.2/video.js"></script>
    <script src="/cctv/js/demo.js"></script>
    <script src="/cctv/js/webVideoCtrl.js"></script>

</head>
<body>

<div id="container" style="width:1600px">

    <div id="header">
        <h1 style="margin-bottom:0;width: 300px">多路视频监控操作台</h1>
    </div>

    <div id="menu" style="height:670px;width:900px;float:left;">

        <div>
            <!--<video id = "player" style="width: 880px;height: 585px;background-color: #1e1b29"   >-->
            <!--<source src="/video/sintel.mp4" type="video/mp4">-->
            <!--</video>-->
            <!--<embed align="center" type="application/hwp-webvideo-plugin" width="880" height="585" name="webVideoCtrl20180602115305" wndtype="1" playmode="1" colors="">-->
            <video id="player" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="none" width="880" height="585"
                   poster=""
                   data-setup="{}">
                <!--<source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4' />-->
                <source src="rtmp://live.hkstv.hk.lxdns.com/live/hks" type="rtmp/flv"/>
                <!--<source src="rtmp://pull-g.kktv8.com/livekktv/100987038" type="rtmp/flv"/>-->

            </video>
        </div>
        <div>

            <button class="btn_e" id="btn1" style="border-color: rgb(220, 220, 220);float:left "
                    onmouseover="this.style.borderColor='#f76b00'" onmouseout="this.style.borderColor='#dcdcdc'" >抓图
            </button>
            <button class="btn_e" id="btn2" style="border-color: rgb(220, 220, 220);float:left;"
                    onmouseover="this.style.borderColor='#f76b00'" onmouseout="this.style.borderColor='#dcdcdc'">复位
            </button>
            <select class="btn_e" id="lines" style="border-color: rgb(220, 220, 220);"
                    onmouseover="this.style.borderColor='#f76b00'" onmouseout="this.style.borderColor='#dcdcdc'">
                <option value="0">线路</option>
                <option value="线路1">线路1</option>
                <option value="线路2">线路2</option>
                <option value="线路3">线路3</option>
                <option value="线路4">线路4</option>
                <option value="线路5">线路5</option>
            </select>


        </div>

    </div>

    <div id="content" style="height:670px;width:700px;float:left;">


        <div style="float: left;width: 350px;height: 100%;">
            <div>
                <img id="ab_img1" src="/cctv/images/ab_images/1.jpg" style="height: 220px;width: 100%">
            </div>

            <div>
                <img id="ab_img2" src="/cctv/images/ab_images/2.jpg" style="height: 220px;width: 100%">
            </div>
            <div>
                <img id="ab_img3" src="/cctv/images/ab_images/3.jpg" style="height: 220px;width: 100%">
            </div>
        </div>
        <div style="width: 350px;height: 100%;float:left;">
            <div>
                <fieldset class="localconfig">
                    <legend>本地配置</legend>
                    <table cellpadding="0" cellspacing="3" border="0">

                        <tr>
                            <td class="tt">抓图文件格式:</td>
                            <td>
                                <select id="captureFileFormat" name="captureFileFormat" class="sel">
                                    <option value="0">JPEG</option>
                                    <option value="1">BMP</option>
                                    <option value="2">PNG</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td class="tt">录像保存路径:</td>
                            <td colspan="3"><input id="recordPath" type="text" class="txt"/>&nbsp;<input type="button"
                                                                                                         class="btn"
                                                                                                         value="浏览"
                                                                                                         onclick="clickOpenFileDlg('recordPath', 0);"/>
                            </td>
                        </tr>

                        <tr>
                            <td class="tt">抓图保存路径:</td>
                            <td colspan="3"><input id="crawlPicPath" type="text" class="txt"/>&nbsp;<input type="button"
                                                                                                           class="btn"
                                                                                                           value="浏览"
                                                                                                           onclick="clickOpenFileDlg('crawlPicPath', 0);"/>
                            </td>

                        </tr>

                        <tr>
                            <input type="button" class="btn" value="设置" onclick="clickSetLocalCfg();"/>
                        </tr>
                    </table>
                </fieldset>
            </div>
            <div>
                <fieldset class="operate">
                    <legend>操作信息</legend>
                    <div id="opinfo" class="opinfo" style="height:300px"></div>
                </fieldset>
            </div>

            <div>
                <fieldset class="localconfig">
                    <legend>添加线路</legend>
                    <table cellpadding="0" cellspacing="3" border="0">
                        <tr>
                            <td class="tt">线路名称:</td>
                            <td colspan="3"><input id="lineName" type="text" class="txt"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="tt">rtsp路径:</td>
                            <td colspan="3"><input id="rtspPath" type="text" class="txt"/>
                            </td>
                        </tr>

                        <tr>
                            <td class="tt">rtmp路径:</td>
                            <td colspan="3"><input id="rtmpPath" type="text" class="txt"/>
                            </td>

                        </tr>

                        <tr>
                            <input type="button" class="btn" value="添加" onclick="addNewLine();"/></td>
                        </tr>
                    </table>
                </fieldset>
            </div>


        </div>

    </div>

</div>
<script type="text/javascript">
    var video;
    $(function () {
        video = videojs(document.getElementById("player"), {
        }, function () {
        });
        // setInterval(function () {
        //     var v=this.options[this.selectedIndex].text;
        //     $.ajax({
        //         type: "POST",
        //         url: "/detect/freshAbImgShow",
        //         data:{"lineName":v},
        //         contentType: false,    //不可缺
        //         processData: false,    //不可缺;
        //         dataType: "json",
        //         success: function (suc) {
        //             if (suc.code === 0) {
        //                 $("#ab_img1").attr("src","/images/ab_images/1.jpg") ;
        //                 $("#ab_img2").attr("src","/images/ab_images/2.jpg") ;
        //                 $("#ab_img3").attr("src","/images/ab_images/3.jpg") ;
        //                 showOPInfo(suc.msg);
        //                 return false;
        //             }
        //         },
        //     });
        // }, 1000); //每隔一秒执行一次
    });
    function clickSetLocalCfg(){}
    function addNewLine(){}
    $('#lines').change(function () {
        video.pause();
        var data = new FormData();

        var v=this.options[this.selectedIndex].text;
        data.append("lineName",v);
        console.info(v);
       //根据选择的线路从服务器获取源并切换
        $.ajax({
            type: "POST",
            url: "/detect/changeLine",
            data:data,
            contentType: false,    //不可缺
            processData: false,    //不可缺;
            dataType: "json",
            success: function (suc) {
                if (suc.code === 0) {
                    video.src(suc.data);
                    video.play();
                    showOPInfo(suc.msg);
                    return false;
                }
                showOPInfo(suc.msg);
            }
        });



    });
</script>
</body>

</html>