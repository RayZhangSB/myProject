<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="renderer" content="webkit">
    <title></title>
    <link rel="stylesheet" href=" /css/pintuer.css">
    <link rel="stylesheet" href=" /css/admin.css">
    <script src=" /js/jquery.js"></script>
    <script src=" /js/pintuer.js"></script>
</head>
<body onload="showUserInfo()">
<div class="panel admin-panel">
    <div class="panel-head" id="add"><strong><span class="icon-pencil-square-o"/>增加内容</strong></div>
    <div class="body-content">
        <form method="post" class="form-x" action="" enctype="multipart/form-data">
            <div class="form-group">

                <div class="label">
                    <label><img id="headImg" class="radius-circle " style="margin-left:10px" height="50" alt=""
                                src="/images/loading.gif"/></label>
                </div>
                <div class="field">
                    <input type="file" class="button bg-blue margin-left" name="head" value="+ 浏览上传"
                           style="float:left;" onchange="uploadHead()">
                    <div class="tips"></div>
                </div>
            </div>
                <div class="form-group">
                    <div class="label">
                        <label>用户名：</label>
                    </div>
                    <div class="field">
                        <div class="tips"><a id="userName"></a></div>
                    </div>
                </div>

            <div class="form-group">

                <div class="label">
                    <label>工作组：</label>
                </div>
                <div class="field">
                    <input class="input" id="userWorkgroup" style=" height:30px;" size="50"></input>
                    <div class="tips"></div>
                </div>

            </div>
            <div class="clear"></div>
            <div class="form-group">

                <div class="label">
                    <label>职位：</label>
                </div>
                <div class="field">
                    <input class="input" id="userPosition" style=" height:30px;" size="50"></input>
                    <div class="tips"></div>
                </div>

            </div>
            <div class="clear"></div>
            <div class="form-group">
                <div class="label">
                    <label>年龄：</label>
                </div>
                <div class="field">
                    <div class="tips"><a id="userAge"></a></div>
                </div>
            </div>
            <div class="form-group">

                <div class="label">
                    <label>Email：</label>
                </div>
                <div class="field">
                    <input class="input" id="userEmail" style=" height:30px;" size="50"></input>
                    <div class="tips"></div>
                </div>

            </div>
            <div class="form-group">
                <div class="label">
                    <label>联系电话：</label>
                </div>
                <div class="field">
                    <input class="input" id="userPhone" style=" height:30px;" size="50"></input>
                    <div class="tips"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="label">
                    <label/>
                </div>
                <div class="field">
                    <button class="button bg-main icon-check-square-o" type="button" onclick="updateUserInfo()">更新
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    var userdata = "";
    var newHeadUrl = "";

    function showUserInfo() {
        $.ajax({
            type: "GET",
            url: "/user/getUserInfo",
            contentType: false,    //不可缺
            processData: false,    //不可缺;
            dataType: "json",
            success: function (suc) {
                if (suc.code === 0) {
                    userdata = suc.data;
                    console.info(userdata);
                    $("#headImg").attr("src", suc.data.headUrl);
                    document.getElementById("userName").innerText = suc.data.userName;
                    $("#userWorkgroup").val(suc.data.userWorkgroup);
                    $("#userPosition").val(suc.data.userPosition);
                    document.getElementById("userAge").innerText = suc.data.userAge;
                    $("#userEmail").val(suc.data.userEmail);
                    $("#userPhone").val(suc.data.userPhone);
                } else {
                    alert(suc.msg);
                    return false;
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Network error, please check the network and try again" + XMLHttpRequest + textStatus + errorThrown);
                return false;
            }
        });
    }


    function uploadHead() {

//name = head;

    }

    function checkChanged() {

    }

    function updateUserInfo() {
        if (!checkChanged()) {
            alert(" Please modify an item first");
            return;
        }

    }
</script>


</body>
</html>